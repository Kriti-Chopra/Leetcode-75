class Solution {
    public String decodeString(String s) {
        Stack<Character> stack = new Stack<Character>();

        //for all string characters, push in if not ']'
        for(int i=0;i<s.length();++i){
        //if char is ']' then keep removing until you have '['
        //after '[' will be a number, for those many times, keep replicating the string
        // System.out.println("in for"+ i);
            if(s.charAt(i)==']'){
                System.out.println("in if");
                StringBuilder sb = new StringBuilder();
                while(stack.peek()!='['){
                    System.out.println("in while"+ stack.peek());
                    sb.append(stack.peek());
                    stack.pop();
                    System.out.println("removed");
                }
                stack.pop();
                sb = sb.reverse();
                String actualString = sb.toString(); 
                for(int j=0;j<stack.peek()-1;++i){
                    sb.append(actualString);
                }
                stack.pop();
                //add back to stack
                String finalString = sb.toString();
                for(int k=0;k<finalString.length();++k){
                    System.out.println("in k");
                    stack.push(finalString.charAt(k));
                }
            }

            else {
                System.out.println("added");
                stack.push(s.charAt(i));
            }
        }

        StringBuilder st = new StringBuilder();
        while(stack.size()>0){
            st.append(stack.peek());
            stack.pop();
        }
        return st.reverse().toString();
    }
}
